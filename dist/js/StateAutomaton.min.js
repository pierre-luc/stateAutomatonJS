/*!
 * StateAutomatonJS - v0.0.1
 * @author Pierre-Luc BLOT
 * @created 13/11/15
 */
!function(t){var o={graphic:{defaultContext:null,antialiasing:!0,getContext:function(t,o){if("undefined"==typeof t){if(null===this.defaultContext)throw"Aucun context n'a été initialisé";return this.defaultContext}"undefined"==typeof o&&(o=!0);var i=t.getContext("2d");return this.antialiasing&&o?(i.imageSmoothingEnabled=!0,i.lineWidth=1):(i.translate(.5,.5),i.imageSmoothingEnabled=!0,i.lineWidth=.5),null===this.defaultContext&&(this.defaultContext=i),i},setDefaultContext:function(t){this.defaultContext=t}}};"undefined"==typeof t.stateAutomaton&&(t.stateAutomaton=o)}(window),function(t){"use strict";var o=function(t){this.x=t.coord.x,this.y=t.coord.y,this.name=t.name};o.prototype.getCoord=function(){return{x:this.x,y:this.y}},o.prototype.setCoord=function(t){this.x=t.x,this.y=t.y},o.prototype.draw=function(o){"undefined"==typeof o&&(o=t.stateAutomaton.graphic.defaultContext),o.beginPath(),o.moveTo(this.x-5,this.y),o.lineTo(this.x+5,this.y),o.moveTo(this.x,this.y-5),o.lineTo(this.x,this.y+5),o.lineWidth=1,o.stroke()},o.prototype.distance=function(t){return Math.sqrt((this.x-t.getCoord().x)*(this.x-t.getCoord().x)+(this.y-t.getCoord().y)*(this.y-t.getCoord().y))},t.stateAutomaton.graphic.Point=o}(window),function(t){"use strict";var o=function(t){this.start=t.start,this.end=t.end,this.start.getCoord().x==this.end.getCoord().x?this.angle=Math.PI/2:this.start.getCoord().y==this.end.getCoord().y?this.angle=0:this.angle=Math.atan((this.end.getCoord().y-this.start.getCoord().y)/(this.end.getCoord().x-this.start.getCoord().x)),this.middle=new stateAutomaton.graphic.Point({coord:{x:(this.start.getCoord().x+this.end.getCoord().x)/2,y:(this.start.getCoord().y+this.end.getCoord().y)/2}}),this.norm=this.start.distance(this.end)};o.prototype.getStartPoint=function(){return this.start},o.prototype.getEndPoint=function(){return this.end},o.prototype.draw=function(o){"undefined"==typeof o&&(o=t.stateAutomaton.graphic.defaultContext),o.beginPath(),o.moveTo(this.start.getCoord().x,this.start.getCoord().y),o.lineTo(this.end.getCoord().x,this.end.getCoord().y),o.stroke()},o.prototype.getAngle=function(){return this.angle},o.prototype.getMiddle=function(){return this.middle},o.prototype.getNorm=function(){return this.norm},t.stateAutomaton.graphic.Line=o}(window),function(t){"use strict";var o=function(t){this.start=t.start,this.end=t.end,this.height=t.height;var o=new stateAutomaton.graphic.Line({start:this.start,end:this.end});this.control1=new stateAutomaton.graphic.Point({coord:{x:this.start.getCoord().x+this.height*Math.cos(o.getAngle()+Math.PI/2+Math.PI/11),y:this.start.getCoord().y+this.height*Math.sin(o.getAngle()+Math.PI/2+Math.PI/11)}}),this.control2=new stateAutomaton.graphic.Point({coord:{x:this.end.getCoord().x+this.height*Math.cos(o.getAngle()+Math.PI/2-Math.PI/11),y:this.end.getCoord().y+this.height*Math.sin(o.getAngle()+Math.PI/2-Math.PI/11)}}),this.middleControl=new stateAutomaton.graphic.Point({coord:{x:(this.control1.getCoord().x+this.control2.getCoord().x)/2,y:(this.control1.getCoord().y+this.control2.getCoord().y)/2}})};o.prototype.getHeight=function(){return this.height},o.prototype.getMiddleControlPoint=function(){return this.middleControl},o.prototype.getStartControlPoint=function(){return this.control1},o.prototype.getEndControlPoint=function(){return this.control2},o.prototype.getStartPoint=function(){return this.start},o.prototype.getEndPoint=function(){return this.end},o.prototype.draw=function(o){"undefined"==typeof o&&(o=t.stateAutomaton.graphic.defaultContext),o.beginPath(),o.moveTo(this.start.getCoord().x,this.start.getCoord().y),o.bezierCurveTo(this.control1.getCoord().x,this.control1.getCoord().y,this.control2.getCoord().x,this.control2.getCoord().y,this.end.getCoord().x,this.end.getCoord().y),o.stroke()},t.stateAutomaton.graphic.Arc=o}(window),function(t){"use strict";var o=function(t){this.origin=t.origin,this.height=t.height,this.width=t.width,this.angle=t.angle};o.prototype.getOrigin=function(){return this.origin},o.prototype.getHeight=function(){return this.height},o.prototype.getWidth=function(){return this.width},o.prototype.draw=function(o){"undefined"==typeof o&&(o=t.stateAutomaton.graphic.defaultContext);var i={x:this.origin.getCoord().x,y:this.origin.getCoord().y};o.lineWidth;o.beginPath(),o.save(),o.translate(i.x,i.y),o.rotate(this.angle),o.moveTo(-this.width,0),o.lineTo(-this.width,-this.height),o.lineTo(0,0),o.lineTo(-this.width,this.height),o.lineTo(-this.width,0),o.closePath(),o.fill(),o.restore()},t.stateAutomaton.graphic.HeadArrow=o}(window),function(t){"use strict";var o=function(t){function o(t,o,i,e,n){var r=t*t,h=r*t;return o+(3*-o+t*(3*o-o*t))*t+(3*i+t*(-6*i+3*i*t))*t+(3*e-3*e*t)*r+n*h}function i(t,i,e,n,r){var h=o(r,t.x,i.x,e.x,n.x),s=o(r,t.y,i.y,e.y,n.y);return{x:h,y:s}}function e(t,o){var e,n,r,h,s,a=.1;"end"==o?(n={x:t.sx,y:t.sy},r={x:t.ex,y:t.ey},h=r,s=.99-a):(n={x:t.sx,y:t.sy},r={x:t.ex,y:t.ey},h=n,s=.01+a),e=i(n,{x:t.cx1,y:t.cy1},{x:t.cx2,y:t.cy2},r,s);var d=h.x-e.x,g=h.y-e.y;return Math.atan2(g,d)}this.arc=new stateAutomaton.graphic.Arc(t);var n={sx:this.arc.getStartPoint().getCoord().x,sy:this.arc.getStartPoint().getCoord().y,cx1:this.arc.getStartControlPoint().getCoord().x,cy1:this.arc.getStartControlPoint().getCoord().y,cx2:this.arc.getEndControlPoint().getCoord().x,cy2:this.arc.getEndControlPoint().getCoord().y,ex:this.arc.getEndPoint().getCoord().x,ey:this.arc.getEndPoint().getCoord().y};this.arrowRight=new stateAutomaton.graphic.HeadArrow({origin:this.arc.getEndPoint(),height:5,width:5,angle:e(n,"end")}),this.arrowLeft=new stateAutomaton.graphic.HeadArrow({origin:this.arc.getStartPoint(),height:5,width:5,angle:e(n,"start")}),this.direction="right","string"==typeof t.direction&&(this.direction=t.direction)};o.prototype.getDirection=function(){return this.direction},o.prototype.getArc=function(){return this.arc},o.prototype.draw=function(o){"undefined"==typeof o&&(o=t.stateAutomaton.graphic.defaultContext),this.arc.draw(o),("left"==this.direction||"both"==this.direction)&&this.arrowLeft.draw(o),("right"==this.direction||"both"==this.direction)&&this.arrowRight.draw(o)},t.stateAutomaton.graphic.ArcArrow=o}(window),function(t){"use strict";var o=function(t){this.start=t.start,this.end=t.end,this.line=new stateAutomaton.graphic.Line({start:this.start,end:this.end}),this.direction="right","string"==typeof t.direction&&(this.direction=t.direction),this.endHeadArrow=new stateAutomaton.graphic.HeadArrow({origin:this.start,angle:this.line.getAngle()+Math.PI,height:5,width:5}),this.startHeadArrow=new stateAutomaton.graphic.HeadArrow({origin:this.end,angle:this.line.getAngle(),height:5,width:5})};o.prototype.getStartPoint=function(){return this.start},o.prototype.getEndPoint=function(){return this.end},o.prototype.getDirection=function(){return this.direction},o.prototype.draw=function(o){"undefined"==typeof o&&(o=t.stateAutomaton.graphic.defaultContext),this.line.draw(o),("right"==this.direction||"both"==this.direction)&&this.endHeadArrow.draw(o),("left"==this.direction||"both"==this.direction)&&this.startHeadArrow.draw(o)},t.stateAutomaton.graphic.Arrow=o}(window),function(t){"use strict";var o=function(t){this.center=t.center;var o=t.radius;"number"!=typeof t.radius&&(o=this.center.distance(t.point)),this.radius=o};o.prototype.getCenter=function(){return this.center},o.prototype.getRadius=function(){return this.radius},o.prototype.draw=function(o){"undefined"==typeof o&&(o=t.stateAutomaton.graphic.defaultContext),o.beginPath(),o.arc(this.center.getCoord().x,this.center.getCoord().y,this.radius,0,2*Math.PI,!0),o.stroke()},o.prototype.getPoint=function(t){return new stateAutomaton.graphic.Point({coord:{x:this.center.getCoord().x+this.radius*Math.cos(t),y:this.center.getCoord().y+this.radius*Math.sin(t)}})},t.stateAutomaton.graphic.Circle=o}(window);