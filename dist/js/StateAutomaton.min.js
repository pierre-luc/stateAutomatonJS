/*!
 * StateAutomatonJS - v0.0.1
 * @author Pierre-Luc BLOT
 * @created 13/11/15
 */
!function(t){var i={graphic:{defaultContext:null,antialiasing:!0,getContext:function(t,i){"undefined"==typeof i&&(i=!0);var o=t.getContext("2d");return this.antialiasing&&i?(o.imageSmoothingEnabled=!0,o.lineWidth=1):(o.translate(.5,.5),o.imageSmoothingEnabled=!0,o.lineWidth=.5),null===this.defaultContext&&(this.defaultContext=o),o},setDefaultContext:function(t){this.defaultContext=t}}};"undefined"==typeof t.stateAutomaton&&(t.stateAutomaton=i)}(window),function(t){"use strict";var i=function(t){this.x=t.coord.x,this.y=t.coord.y,this.name=t.name};i.prototype.getCoord=function(){return{x:this.x,y:this.y}},i.prototype.setCoord=function(t){this.x=t.x,this.y=t.y},i.prototype.draw=function(i){"undefined"==typeof i&&(i=t.stateAutomaton.graphic.defaultContext),i.beginPath(),i.moveTo(this.x-5,this.y),i.lineTo(this.x+5,this.y),i.moveTo(this.x,this.y-5),i.lineTo(this.x,this.y+5),i.lineWidth=1,i.stroke()},i.prototype.distance=function(t){return Math.sqrt((this.x-t.getCoord().x)*(this.x-t.getCoord().x)+(this.y-t.getCoord().y)*(this.y-t.getCoord().y))},t.stateAutomaton.graphic.Point=i}(window),function(t){"use strict";var i=function(t){this.start=t.start,this.end=t.end,this.start.getCoord().x==this.end.getCoord().x?this.angle=Math.PI/2:this.start.getCoord().y==this.end.getCoord().y?this.angle=0:this.angle=Math.atan((this.end.getCoord().y-this.start.getCoord().y)/(this.end.getCoord().x-this.start.getCoord().x)),this.middle=new stateAutomaton.graphic.Point({coord:{x:(this.start.getCoord().x+this.end.getCoord().x)/2,y:(this.start.getCoord().y+this.end.getCoord().y)/2}}),this.norm=this.start.distance(this.end)};i.prototype.getStartPoint=function(){return this.start},i.prototype.getEndPoint=function(){return this.end},i.prototype.draw=function(i){"undefined"==typeof i&&(i=t.stateAutomaton.graphic.defaultContext),i.beginPath(),i.moveTo(this.start.getCoord().x,this.start.getCoord().y),i.lineTo(this.end.getCoord().x,this.end.getCoord().y),i.stroke()},i.prototype.getAngle=function(){return this.angle},i.prototype.getMiddle=function(){return this.middle},i.prototype.getNorm=function(){return this.norm},t.stateAutomaton.graphic.Line=i}(window),function(t){"use strict";var i=function(t){this.start=t.start,this.end=t.end,this.height=t.height;var i=new stateAutomaton.graphic.Line({start:this.start,end:this.end});this.control1=new stateAutomaton.graphic.Point({coord:{x:this.start.getCoord().x+this.height*Math.cos(i.getAngle()+Math.PI/2+Math.PI/11),y:this.start.getCoord().y+this.height*Math.sin(i.getAngle()+Math.PI/2+Math.PI/11)}}),this.control2=new stateAutomaton.graphic.Point({coord:{x:this.end.getCoord().x+this.height*Math.cos(i.getAngle()+Math.PI/2-Math.PI/11),y:this.end.getCoord().y+this.height*Math.sin(i.getAngle()+Math.PI/2-Math.PI/11)}})};i.prototype.getHeight=function(){return this.height},i.prototype.getStartControlPoint=function(){return this.control1},i.prototype.getEndControlPoint=function(){return this.control2},i.prototype.getStartPoint=function(){return this.start},i.prototype.getEndPoint=function(){return this.end},i.prototype.draw=function(i){"undefined"==typeof i&&(i=t.stateAutomaton.graphic.defaultContext),i.beginPath(),i.moveTo(this.start.getCoord().x,this.start.getCoord().y),i.bezierCurveTo(this.control1.getCoord().x,this.control1.getCoord().y,this.control2.getCoord().x,this.control2.getCoord().y,this.end.getCoord().x,this.end.getCoord().y),i.stroke()},t.stateAutomaton.graphic.Arc=i}(window),function(t){"use strict";var i=function(t){this.origin=t.origin,this.height=t.height,this.width=t.width,this.angle=t.angle};i.prototype.getOrigin=function(){return this.origin},i.prototype.getHeight=function(){return this.height},i.prototype.getWidth=function(){return this.width},i.prototype.draw=function(i){"undefined"==typeof i&&(i=t.stateAutomaton.graphic.defaultContext),i.beginPath();var o=Math.sqrt(this.height*this.height/4+this.width*this.width),e=Math.atan(this.height/(2*this.width)),n={x:this.origin.getCoord().x,y:this.origin.getCoord().y},r={x:this.origin.getCoord().x+o*Math.cos(this.angle-e),y:this.origin.getCoord().y+o*Math.sin(this.angle-e)},h={x:this.origin.getCoord().x+o*Math.cos(this.angle+e),y:this.origin.getCoord().y+o*Math.sin(this.angle+e)};i.moveTo(n.x,n.y),i.lineTo(r.x,r.y),i.lineTo(h.x,h.y),i.fill(),i.stroke()},t.stateAutomaton.graphic.HeadArrow=i}(window),function(t){"use strict";var i=function(t){this.arc=new stateAutomaton.graphic.Arc(t);var i=new stateAutomaton.graphic.Line({end:this.arc.getEndControlPoint(),start:this.arc.getEndPoint()}).getAngle();this.arrowRight=new stateAutomaton.graphic.HeadArrow({origin:this.arc.getEndPoint(),height:5,width:5,angle:i});var o=new stateAutomaton.graphic.Line({end:this.arc.getStartControlPoint(),start:this.arc.getStartPoint()}).getAngle();this.arrowLeft=new stateAutomaton.graphic.HeadArrow({origin:this.arc.getStartPoint(),height:5,width:5,angle:o+Math.PI}),this.direction="right","string"==typeof t.direction&&(this.direction=t.direction)};i.prototype.getDirection=function(){return this.direction},i.prototype.getArc=function(){return this.arc},i.prototype.draw=function(i){"undefined"==typeof i&&(i=t.stateAutomaton.graphic.defaultContext),this.arc.draw(i),("left"==this.direction||"both"==this.direction)&&this.arrowLeft.draw(i),("right"==this.direction||"both"==this.direction)&&this.arrowRight.draw(i)},t.stateAutomaton.graphic.ArcArrow=i}(window),function(t){"use strict";var i=function(t){this.start=t.start,this.end=t.end,this.line=new stateAutomaton.graphic.Line({start:this.start,end:this.end}),this.direction="right","string"==typeof t.direction&&(this.direction=t.direction),this.endHeadArrow=new stateAutomaton.graphic.HeadArrow({origin:this.start,angle:this.line.getAngle(),height:7,width:7}),this.startHeadArrow=new stateAutomaton.graphic.HeadArrow({origin:this.end,angle:this.line.getAngle()+Math.PI,height:7,width:7})};i.prototype.getStartPoint=function(){return this.start},i.prototype.getEndPoint=function(){return this.end},i.prototype.getDirection=function(){return this.direction},i.prototype.draw=function(i){"undefined"==typeof i&&(i=t.stateAutomaton.graphic.defaultContext),this.line.draw(i),("right"==this.direction||"both"==this.direction)&&this.endHeadArrow.draw(i),("left"==this.direction||"both"==this.direction)&&this.startHeadArrow.draw(i)},t.stateAutomaton.graphic.Arrow=i}(window),function(t){"use strict";var i=function(t){this.center=t.center;var i=t.radius;"number"!=typeof t.radius&&(i=this.center.distance(t.point)),this.radius=i};i.prototype.getCenter=function(){return this.center},i.prototype.getRadius=function(){return this.radius},i.prototype.draw=function(i){"undefined"==typeof i&&(i=t.stateAutomaton.graphic.defaultContext),i.beginPath(),i.arc(this.center.getCoord().x,this.center.getCoord().y,this.radius,0,2*Math.PI,!0),i.stroke()},i.prototype.getPoint=function(t){return new stateAutomaton.graphic.Point({coord:{x:this.center.getCoord().x+this.radius*Math.cos(t),y:this.center.getCoord().y+this.radius*Math.sin(t)}})},t.stateAutomaton.graphic.Circle=i}(window);